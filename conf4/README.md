# Учебная Виртуальная Машина (УВМ)

Проект реализует ассемблер и интерпретатор для учебной виртуальной машины (УВМ).

## Структура проекта

- `assembler.py` - Реализация ассемблера
- `interpreter.py` - Реализация интерпретатора
- `test_program.asm` - Пример тестовой программы

## Система команд

1. Загрузка константы (Опкод 14)
   - Размер: 5 байт
   - Формат: `14 <значение>`
   - Пример: `14 129` → `0x2E 0x10 0x00 0x00 0x00`
   - Операнд: поле B
   - Результат: регистр-аккумулятор

2. Чтение из памяти (Опкод 25)
   - Размер: 3 байта
   - Формат: `25 <адрес>`
   - Пример: `25 10` → `0x59 0x01 0x00`
   - Операнд: значение в памяти по адресу B
   - Результат: регистр-аккумулятор

3. Запись в память (Опкод 15)
   - Размер: 3 байта
   - Формат: `15 <адрес>`
   - Пример: `15 761` → `0x2F 0x5F 0x00`
   - Операнд: регистр-аккумулятор
   - Результат: значение в памяти по адресу B

4. Операция MIN (Опкод 20)
   - Размер: 3 байта
   - Формат: `20 <адрес>`
   - Пример: `20 935` → `0xF4 0x74 0x00`
   - Первый операнд: регистр-аккумулятор
   - Второй операнд: значение в памяти по адресу B
   - Результат: регистр-аккумулятор

## Использование


2. Сборка программы:
```bash
python assembler.py <исходный_файл> <выходной_файл> <файл_лога>
```

3. Запуск интерпретатора:
```bash
python interpreter.py <бинарный_файл> <начальный_адрес> <конечный_адрес> <файл_результата>
```

## Пример использования

Для запуска тестовой программы, которая выполняет поэлементную операцию min() над двумя векторами:

1. Сборка программы:
```bash
python assembler.py test_program.asm program.bin assembly.log
```

2. Запуск интерпретатора:
```bash
python interpreter.py program.bin 8 15 result.yaml
```

Это выполнит следующие действия:
1. Соберёт тестовую программу в бинарный файл
2. Выполнит программу
3. Сохранит результирующий вектор (адреса 8-15) в файле result.yaml

## Формат файлов

- Исходный файл: текстовый файл с командами УВМ
- Бинарный файл: последовательность байт с закодированными инструкциями
- Лог-файл: YAML-файл со списком ассемблированных инструкций
- Файл результата: YAML-файл с значениями из указанного диапазона памяти
